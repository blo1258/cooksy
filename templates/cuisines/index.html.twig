{% extends 'base.html.twig' %}

{% block title %}Cuisines du Monde{% endblock %}

{% block body %}
<header class="bg-[#2e2e2e] shadow-md">
    <div class="container mx-auto flex items-center justify-between p-4 flex-wrap">
        <div class="flex-shrink-0">
            <a href="{{ path('app_accueil') }}">
                <img src="{{ asset('images/cooksy_logo.png') }}" alt="Cooksy Logo" class="h-20 w-auto">
            </a>
        </div>
        <div class="relative flex-grow mx-auto max-w-lg w-full mt-4 mb-2">
            <form action="{{ path('app_recette_index') }}" method="GET" class="relative flex-grow mx-auto max-w-lg order-last md:order-none w-full md:w-auto mt-4 md:mt-0">
                <input type="search" name="q" placeholder="Que faisons-nous aujourd'hui ?" value="{{ app.request.query.get('q') }}" 
                        class="w-full pl-16 pr-10 py-2 text-white border border-gray-600 
                        rounded-full focus:outline-none focus:ring-2 focus:ring-orange-500 
                        transition duration-300 placeholder-white search-input">
                    <button type="submit" class="absolute left-0 top-10 transform -translate-y-1/2 ml-4 text-white z-10">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
            </form>

        </div>
        <div class="flex space-x-2 md:space-x-4">
        {# Kullanıcı giriş yaptıysa, profil avatarını ve çıkış yap bağlantısını göster #}
        {% if is_granted('IS_AUTHENTICATED_FULLY') %}
            <div class="user-info flex items-center space-x-2">
                        <a href="{{ path('app_profil') }}" class="flex-col flex items-center text-gray-200 hover:text-orange-600 font-medium">
                        {% if app.user.image %}
                            <img src="{{ asset('uploads/' ~ app.user.image) }}" alt="Profil Resmi" class="profile-avatar w-[76px] h-[76px]">
                        {% else %}
                            <img src="https://placehold.co/32x32/E0E0E0/FFFFFF?text=P" alt="Varsayılan Profil Resmi" class="profile-avatar w-[76px] h-[76px] border-2 border-orange-500">
                        {% endif %}
                        
                        <span>{{ app.user.nom }}</span>
                        </a>

                        <div class="flex flex-col items-center space-y-4 ml-6 relative">
                        {# ADMIN PANEL LİNKİ — sadece adminlere görünür #}
                        {% if is_granted('ROLE_ADMIN') %}
                                <a href="{{ path('app_admin_index') }}" class="relative group">
                                    <i class="fa-solid fa-gear text-blue-500 text-3xl"></i>
                                    <span class="absolute top-1/2 left-[-270px] translate-x-1/2 mt-2 px-2 py-1 bg-yellow-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-50 whitespace-nowrap shadow-md">
                                        Panneau d’administration
                                    </span>
                                </a>
                            {% endif %}

                        <a href="{{ path('app_logout') }}" class="relative group">
                            
                            <i class="fa-solid fa-right-from-bracket text-red-500 text-3xl"></i>
                            <span class="absolute left-[10px] top-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-yellow-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-50 whitespace-nowrap shadow-md">Se déconnecter</span>
                        </a>
                    </div>
        {# Kullanıcı giriş yapmadıysa, giriş ve kayıt linklerini göster #}
        {% else %}
            <a href="{{ path('app_login') }}" class="bg-orange-500 hover:bg-orange-600 text-white font-semibold py-2 px-4 rounded-full transition duration-300 transform hover:scale-105 shadow-md">Se connecter</a>
            <a href="{{ path('app_register') }}" class="bg-orange-100 text-orange-600 font-semibold py-2 px-4 rounded-full border border-orange-500 hover:bg-orange-200 transition duration-300 transform hover:scale-105 shadow-md">S'inscrire</a>
        {% endif %}
    </div>
    </div>
</header>
<!-- Yeni Menü -->
<nav class="bg-gray-300 shadow-sm p-4 relative">
    <div class="container mx-auto flex justify-between items-center">
        <div class="hidden md:!flex space-x-6 justify-center items-center w-full">
            <a href="{{ path('app_recette_index') }}" class="{% if app.request.attributes.get('_route') == 'app_recette_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">Recettes</a>
            <a href="{{ path('app_cuisines_index') }}" class="{% if app.request.attributes.get('_route') == 'app_cuisines_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">Cuisines</a>
            <a href="{{ path('app_astuces_index') }}" class="{% if app.request.attributes.get('_route') == 'app_astuces_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">Astuces</a>
            <a href="{{ path('app_about_index') }}" class="{% if app.request.attributes.get('_route') == 'app_about_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">À propos</a>
            <a href="{{ path('app_contact_index') }}" class="{% if app.request.attributes.get('_route') == 'app_contact_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">Contact</a>
        </div>

        <!-- Burger Menü Butonu (sadece mobilde) -->
        <div class="relative md:hidden ml-auto group">
            <button id="burger-btn" class="md:hidden ml-auto text-gray-700 text-2xl focus:outline-none cursor-pointer">
                <i class="fas fa-bars"></i>
            </button>
    

    <!-- Mobile Menü: Konumlandırma sorununu gidermek için bu div'i ana nav div'inin dışına taşıdık. -->
            <div id="mobile-menu" class="hidden group-hover:flex absolute right-0 top-full mt-2 bg-white shadow-lg rounded-md flex-col space-y-2 p-3 w-40 z-50">
                <a href="{{ path('app_recette_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">Recettes</a>
                <a href="{{ path('app_cuisines_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">Cuisines</a>
                <a href="{{ path('app_astuces_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">Astuces</a>
                <a href="{{ path('app_about_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">À propos</a>
                <a href="{{ path('app_contact_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">Contact</a>
            </div>
        </div>
    </div>
</nav>

<main class="bg-[#FF7043] min-h-screen py-8">
    <div class="max-w-screen-lg mx-auto px-4">
        <h1 class="text-4xl md:text-5xl font-extrabold text-white text-center mb-12">
            Cuisine du Monde
        </h1>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 w-full">
            <!-- Mutfak 1 -->
            <div class="bg-white rounded-xl shadow-xl p-6 flex items-center justify-between gap-4 
                    transition duration-300 transform hover:scale-[1.03] hover:shadow-2xl ">
            
            <!-- 1. SOL BLOK: Küçük Logo, Başlık ve Metin (DİKEY YERLEŞİM) -->
            <!-- flex-1 ile sol alanın esnek olmasını, flex-col ile içeriklerin alt alta dizilmesini sağladık. -->
            <div class="flex-1 flex flex-col items-start text-left pr-4">
                
                <!-- Küçük Mutfak Logosu -->
                <img src="https://placehold.co/80x80/54A0F4/FFFFFF?text=FR" 
                     alt="Cuisine Française Logo" class="rounded-full w-20 h-20 object-cover mb-3">
                    <h2 class="text-2xl font-bold text-gray-800 mb-1 leading-tight">Cuisine Française</h2>
                
                <p class="text-gray-600 text-sm">Découvrez les secrets de la cuisine française classique, de la bouillabaisse au coq au vin.</p>
            </div>

            <!-- 2. SAĞ BLOK: Büyük Yemek İmajı -->
            <div class="flex-shrink-4">
                <img src="/images/gastrofran.jpg" alt="gastrofran" class="rounded-lg w-90 h-90 shadow-md">
            </div>
                 
        </div>

            <!-- Mutfak 2 -->
            <div class="bg-white rounded-xl shadow-xl p-6 flex items-center justify-between gap-4 
                    transition duration-300 transform hover:scale-[1.03] hover:shadow-2xl ">
                <div class="flex-1 flex flex-col items-start text-left pr-4">
                    <img src="https://placehold.co/150x150/4CAF50/FFFFFF?text=IT" alt="Cuisine Italienne" class="rounded-full mb-4">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Cuisine Italienne</h2>
                    <p class="text-gray-600">Pâtes, pizzas et saveurs du soleil. Plongez dans la richesse des traditions culinaires italiennes.</p>
                </div>
                    <div class="flex-shrink-4">
                        <img src="/images/italian-cuisine.jpg" alt="italian-cuisine" class="rounded-lg w-90 h-90 shadow-md">
                    </div>
            
            </div>

            <!-- Mutfak 3 -->
            <div class="bg-white rounded-xl shadow-xl p-6 flex items-center justify-between gap-4 
                    transition duration-300 transform hover:scale-[1.03] hover:shadow-2xl ">
                <div class="flex-1 flex flex-col items-start text-left pr-4">
                    <img src="https://placehold.co/150x150/B8002D/FFFFFF?text=TR" alt="Cuisine Turque" class="rounded-full mb-4">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Cuisine Turque</h2>
                    <p class="text-gray-600">Voyagez en Turquie avec des plats traditionnels comme le kebab, les mezes et les délices sucrés.</p>
                </div>
                    <div class="flex-shrink-4">
                        <img src="/images/gastroturque.webp" alt="turque-cuisine" class="rounded-lg w-90 h-90 shadow-md">
                    </div>
            
            </div>
            
            <!-- Mutfak 4 -->
        <div class="bg-white rounded-xl shadow-xl p-6 flex items-center justify-between gap-4 
                    transition duration-300 transform hover:scale-[1.03] hover:shadow-2xl ">
            <div class="flex-1 flex flex-col items-start text-left pr-4">                <img src="https://placehold.co/150x150/007BFF/FFFFFF?text=JP" alt="Cuisine Japonaise" class="rounded-full mb-4">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Cuisine Japonaise</h2>
                <p class="text-gray-600">Découvrez l'art et la délicatesse des sushis, ramens et autres plats japonais.</p>
            </div>
                <div class="flex-shrink-4">
                    <img src="/images/gastrojapon.jpg" alt="japon-cuisine" class="rounded-lg w-90 h-90 shadow-md">
                </div>
            
            </div>
        </div>
    </div>
</main>

<footer class="bg-[#2e2e2e] text-white py-8 mt-10">
    <div class="container mx-auto px-4">
        <!-- Menü -->
        <div class="flex justify-center space-x-6 mb-6">
            <a href="{{ path('app_recette_index') }}" class="hover:text-orange-500 transition duration-300">Recettes</a>
            <a href="{{ path('app_cuisines_index') }}" class="hover:text-orange-500 transition duration-300">Cuisines</a>
            <a href="{{ path('app_astuces_index') }}" class="hover:text-orange-500 transition duration-300">Astuces</a>
            <a href="{{ path('app_about_index') }}" class="hover:text-orange-500 transition duration-300">À propos</a>
        </div>

        <hr class="border-gray-700 mb-6">

        <!-- Logo, Slogan ve Sosyal Medya İkonları -->
        <div class="flex md:flex-row items-center justify-between mb-6">
            <div class="flex-1 text-center md:text-left">
                <img src="{{ asset('images/cooksy_logo.png') }}" alt="Cooksy Logo" class="h-16 mx-auto md:mx-0">
                <p class="text-sm mt-2 text-gray-400">Cooksy — Partagez vos recettes préférées 🍲</p>
            </div>
            <div class="flex-1 flex justify-center md:justify-end space-x-4 mt-4 md:mt-0">
                <a href="https://www.facebook.com" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-500 transition duration-300">
                    <i class="fab fa-facebook-f text-2xl"></i>
                </a>
                <a href="https://www.instagram.com" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-500 transition duration-300">
                    <i class="fab fa-instagram text-2xl"></i>
                </a>
                <a href="https://www.youtube.com" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-500 transition duration-300">
                    <i class="fab fa-youtube text-2xl"></i>
                </a>
                <a href="https://www.tiktok.com" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-500 transition duration-300">
                    <i class="fab fa-tiktok text-2xl"></i>
                </a>
            </div>
        </div>

        <!-- Telif Hakkı Metni -->
        <div class="text-center text-gray-500 text-sm">
            © 2025 Cooksy. Tous droits réservés.
        </div>
    </div>
</footer>
<script>
const burgerBtn = document.getElementById("burger-btn");
const mobileMenu = document.getElementById("mobile-menu");

// Menü aç/kapa
burgerBtn.addEventListener("mouseover", (event) => {
    event.stopPropagation();
    mobileMenu.classList.remove("hidden");
});

document.addEventListener("click", (event) => {
    const isMenuVisible = !mobileMenu.classList.contains("hidden");
    
    if(isMenuVisible && !burgerBtn.contains(event.target) && !mobileMenu.contains(event.target)) {
        mobileMenu.classList.add("hidden");
    }
});

// Ekran genişleyince (md ve üstü) mobil menüyü otomatik kapat
window.addEventListener("resize", () => {
  if (window.innerWidth >= 768) {
    mobileMenu.classList.add("hidden");
  }
});
</script>
{% endblock %}
