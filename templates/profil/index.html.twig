{% extends 'base.html.twig' %}

{% block title %}Mon Profile{% endblock %}

{% block body %}
    <style>
        body {
            background-color: #FF7043;
        }
    </style>

    <header class="bg-[#2e2e2e] shadow-md">
    <div class="container mx-auto flex items-center justify-between p-4 flex-wrap">
            <div class="flex-shrink-0">
                <a href="{{ path('app_accueil') }}">
                    <img src="{{ asset('images/cooksy_logo.png') }}" alt="Cooksy Logo" class="h-20 w-auto">
                </a>
            </div>
        
            </div>
            
        </div>
    </header>

<nav class="bg-gray-300 shadow-sm p-4 relative">
        <div class="container mx-auto flex justify-between items-center">
            <div class="hidden md:!flex space-x-6 justify-center items-center w-full">
                <a href="{{ path('app_recette_index') }}" class="{% if app.request.attributes.get('_route') == 'app_recette_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">Recettes</a>
                <a href="{{ path('app_cuisines_index') }}" class="{% if app.request.attributes.get('_route') == 'app_cuisines_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">Cuisines</a>
                <a href="{{ path('app_astuces_index') }}" class="{% if app.request.attributes.get('_route') == 'app_astuces_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">Astuces</a>
                <a href="{{ path('app_about_index') }}" class="{% if app.request.attributes.get('_route') == 'app_about_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">√Ä propos</a>
                <a href="{{ path('app_contact_index') }}" class="{% if app.request.attributes.get('_route') == 'app_contact_index' %}text-orange-600{% else %}text-gray-700 hover:text-orange-600{% endif %} font-semibold transition duration-300">Contact</a>
            </div>

         <!-- Burger Men√º Butonu (sadece mobilde) -->
            <div class="relative md:hidden ml-auto group">
                <button id="burger-btn" class="md:hidden ml-auto text-gray-700 text-2xl focus:outline-none cursor-pointer">
                    <i class="fas fa-bars"></i>
                </button>
    

    <!-- Mobile Men√º: Konumlandƒ±rma sorununu gidermek i√ßin bu div'i ana nav div'inin dƒ±≈üƒ±na ta≈üƒ±dƒ±k. -->
                <div id="mobile-menu" class="hidden group-hover:flex absolute right-0 top-full mt-2 bg-white shadow-lg rounded-md flex-col space-y-2 p-3 w-40 z-50">
                    <a href="{{ path('app_recette_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">Recettes</a>
                    <a href="{{ path('app_cuisines_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">Cuisines</a>
                    <a href="{{ path('app_astuces_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">Astuces</a>
                    <a href="{{ path('app_about_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">√Ä propos</a>
                    <a href="{{ path('app_contact_index') }}" class="text-gray-700 hover:bg-gray-100 p-2 rounded block">Contact</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-4xl m-6 mx-auto p-6 bg-white rounded-lg shadow-lg">
        <div class="flex items-center justify-between mb-8 pb-6 border-b border-gray-200">
            <div class="flex items-center">
                {% if app.user.image is not null %}
                    <img src="{{ asset('uploads/' ~ app.user.image) }}" alt="Profil Resmi" class="w-20 h-20 rounded-full object-cover">
                {% endif %}
                <div class="ml-4">
                    <h2 class="text-xl font-semibold text-gray-800">Bienvenue,</h2><span class="text-[#FF7043] font-bold"> {{ app.user.nom }}</span>
                    <p class="text-gray-500 text-sm">Membre depuis: {{ app.user.createdAt|date('F Y', 'Europe/Paris') }}</p>
                </div>
            </div>
            <div class="text-right mb-5">
                <a href="{{ path('app_accueil') }}" class="inline-block px-4 py-2 text-white bg-gray-500 rounded-md hover:bg-gray-600 transition duration-300">
                    <i class="fas fa-home"></i> Accueil
                </a>
            </div>
        
        </div>

        <div class="flex items-center justify-between">
            <h3 class="text-xl font-semibold text-gray-800 mb-5 border-l-4 border-blue-500 pl-3">üìö Mes recettes publi√©es</h3>
        </div>
        <div class="grid gap-5">
            {% for recette in app.user.recettes %}
                <div class="flex items-center bg-gray-50 p-4 rounded-md shadow-sm">
                    {% if recette.image is not null %}
                        <img src="{{ asset('uploads/recettes/' ~ recette.image) }}" alt="Recette Resmi" class="w-24 h-20 object-cover rounded-md mr-5">
                    {% endif %}
                    <div class="flex-grow">
                        <h4 class="font-semibold text-gray-800">{{ recette.titre }}</h4>
                        <a href="{{ path('app_recette_detail', {id: recette.id}) }}" class="text-blue-500 hover:underline">Voir recette detail</a>
                    </div>
                </div>
            {% else %}
                <p>Vous n'avez pas encore de recettes publi√©es.</p>
            {% endfor %}
            <div class="flex justify-center mt-10">
                <a href="{{ path('app_recette_ajouter') }}" class="bg-green-600 text-white py-3 px-6 rounded-md font-bold hover:bg-green-700 transition duration-300">Ajouter une recette</a>
            </div>
        </div>

        <h3 class="text-xl font-semibold text-gray-800 mt-10 mb-5 border-l-4 border-blue-500 pl-3">‚≠ê Mes commentaires et notes</h3>
        <div class="grid gap-5">
            {% for commentaire in app.user.getCommentaires %}
                {% if commentaire.recette is not null %}
                    <div class="flex items-center bg-gray-50 p-4 rounded-md shadow-sm">
                        {% if commentaire.recette.image is not null %}
                            <img src="{{ asset('uploads/recettes/' ~ commentaire.recette.image) }}" alt="Recette Resmi" class="w-24 h-20 object-cover rounded-md mr-5">
                        {% endif %}
                        <div class="flex-grow">
                            <h4 class="font-semibold text-gray-800">{{ commentaire.recette.titre }}</h4>
                            <p class="text-gray-600 italic">"{{ commentaire.contenu }}"</p>
                        </div>
                        <div class="text-yellow-400 text-xl">
                            {% for i in 1..commentaire.note %}‚≠ê{% endfor %}
                        </div>
                    </div>
                {% endif %}
            {% else %}
                <p>Vous n'avez pas encore comment√© ou not√©.</p>
            {% endfor %}
        </div>

        <div class="flex justify-center mt-10 gap-5">
            <a href="{{ path('app_edit_profile') }}" class="bg-blue-500 text-white py-3 px-6 rounded-md font-bold hover:bg-green-700 transition duration-300">Modifier</a>
            <a href="{{ path('app_changer_mot_de_passe') }}" class="bg-green-600 text-white py-3 px-6 rounded-md font-bold hover:bg-green-700 transition duration-300">Changer le mot de passe</a>
            <a href="{{ path('app_supprimer_compte') }}" class="bg-red-600 text-white py-3 px-6 rounded-md font-bold hover:bg-red-700 transition duration-300">Supprimer mon compte</a>
        </div>
    </div>



<footer class="bg-[#2e2e2e] text-white py-8 mt-10">
    <div class="container mx-auto px-4">
        <!-- Men√º -->
        <div class="flex justify-center space-x-4 mb-6">
            <a href="{{ path('app_recette_index') }}" class="hover:text-orange-500 transition duration-300">Recettes</a>
            <a href="{{ path('app_cuisines_index') }}" class="hover:text-orange-500 transition duration-300">Cuisines</a>
            <a href="{{ path('app_astuces_index') }}" class="hover:text-orange-500 transition duration-300">Astuces</a>
            <a href="{{ path('app_about_index') }}" class="hover:text-orange-500 transition duration-300">√Ä propos</a>
            <a href="{{ path('app_contact_index') }}" class="hover:text-orange-500 transition duration-300">Contact</a>
        </div>

        <hr class="border-gray-700 mb-6">

        <!-- Logo, Slogan ve Sosyal Medya ƒ∞konlarƒ± -->
        <div class="flex md:flex-row items-center justify-between mb-6">
            <div class="flex-1 text-center md:text-left">
                <img src="{{ asset('images/cooksy_logo.png') }}" alt="Cooksy Logo" class="h-16 mx-auto md:mx-0">
                <p class="text-sm mt-2 text-gray-400">Cooksy ‚Äî Partagez vos recettes pr√©f√©r√©es üç≤</p>
            </div>
            <div class="flex-1 flex justify-center md:justify-end space-x-4 mt-4 md:mt-0">
                <a href="https://www.facebook.com" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-500 transition duration-300">
                    <i class="fab fa-facebook-f text-2xl"></i>
                </a>
                <a href="https://www.instagram.com" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-500 transition duration-300">
                    <i class="fab fa-instagram text-2xl"></i>
                </a>
                <a href="https://www.youtube.com" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-500 transition duration-300">
                    <i class="fab fa-youtube text-2xl"></i>
                </a>
                <a href="https://www.tiktok.com" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-orange-500 transition duration-300">
                    <i class="fab fa-tiktok text-2xl"></i>
                </a>
            </div>
        </div>

        <!-- Telif Hakkƒ± Metni -->
        <div class="text-center text-gray-500 text-sm">
            ¬© 2025 Cooksy. Tous droits r√©serv√©s.
        </div>
    </div>
</footer>

<script>
const burgerBtn = document.getElementById("burger-btn");
const mobileMenu = document.getElementById("mobile-menu");

// Men√º a√ß/kapa
burgerBtn.addEventListener("mouseover", (event) => {
    event.stopPropagation();
    mobileMenu.classList.remove("hidden");
});

document.addEventListener("click", (event) => {
    const isMenuVisible = !mobileMenu.classList.contains("hidden");
    
    if(isMenuVisible && !burgerBtn.contains(event.target) && !mobileMenu.contains(event.target)) {
        mobileMenu.classList.add("hidden");
    }
});

// Ekran geni≈üleyince (md ve √ºst√º) mobil men√ºy√º otomatik kapat
window.addEventListener("resize", () => {
  if (window.innerWidth >= 768) {
    mobileMenu.classList.add("hidden");
  }
});

</script>
{% endblock %}
